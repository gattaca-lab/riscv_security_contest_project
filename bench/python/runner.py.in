#!@Python2_EXECUTABLE@ -B

# A proper way would be to set this one to CMAKE_INSTALL_PREFIX, but
# BINARY dir is more convinient for users
import sys
import os
sys.path.append('@CMAKE_BINARY_DIR@/lib')

import libbench
TESTS_DIR = "@CMAKE_SOURCE_DIR@/tests"

THE_TEST = os.path.join(TESTS_DIR, sys.argv[1])

os.environ['TOOLS_DIR'] = '@CMAKE_SOURCE_DIR@/bench/tools'
os.environ['TESTS_DIR'] = TESTS_DIR
sys.path.append("@CMAKE_SOURCE_DIR@/bench/python")

print ('loading <' + THE_TEST + '>')

import imp

PYTHONDONTWRITEBYTECODE=True
test = imp.load_source("the_test", THE_TEST)
test.run(libbench)
